/* 2) Seed minimal reference data
========================================================= */

-- One suite
INSERT INTO benchmarksuite (name, variation, fom1_label, fom2_label, fom3_label, fom4_label, date)
VALUES ('ICCAD04', NULL, 'wirelength', NULL, NULL, NULL, CURDATE())
ON DUPLICATE KEY UPDATE date = VALUES(date);

-- Tools
INSERT INTO tool (name) VALUES
('Uplace'), ('FS5.1'), ('NTUplace3'), ('NTUplaceic04'), ('CT'), ('SA'), ('RePlAce')
ON DUPLICATE KEY UPDATE name = VALUES(name);

-- IBM01..IBM18 for ICCAD04
INSERT INTO benchmark (suite_id, name)
SELECT s.suite_id, v.bench
FROM (
  SELECT 'IBM01' AS bench UNION ALL SELECT 'IBM02' UNION ALL SELECT 'IBM03' UNION ALL
  SELECT 'IBM04' UNION ALL SELECT 'IBM05' UNION ALL SELECT 'IBM06' UNION ALL
  SELECT 'IBM07' UNION ALL SELECT 'IBM08' UNION ALL SELECT 'IBM09' UNION ALL
  SELECT 'IBM10' UNION ALL SELECT 'IBM11' UNION ALL SELECT 'IBM12' UNION ALL
  SELECT 'IBM13' UNION ALL SELECT 'IBM14' UNION ALL SELECT 'IBM15' UNION ALL
  SELECT 'IBM16' UNION ALL SELECT 'IBM17' UNION ALL SELECT 'IBM18'
) v
JOIN benchmarksuite s ON s.name='ICCAD04' AND COALESCE(s.variation,'')=''
LEFT JOIN benchmark b ON b.suite_id = s.suite_id AND b.name = v.bench
WHERE b.benchmark_id IS NULL;

/* =========================================================
   3) Insert Results: inline table â†’ IDs (skip NULLs, avoid dups)
   - Uses NOT EXISTS to keep it idempotent (independent of uk_result_identity).
========================================================= */
INSERT INTO result (tool_id, suite_id, benchmark_id, fom1, fom2, fom3, fom4, date)
SELECT 
  t.tool_id,
  s.suite_id,
  b.benchmark_id,
  src.wl AS fom1,
  NULL, NULL, NULL,
  CURDATE()
FROM (
  /* tool_name, bench_name, wl (wirelength) */
  /* IBM01 */
  SELECT 'Uplace' AS tool_name,'IBM01' AS bench_name, 2450000 AS wl UNION ALL
  SELECT 'FS5.1','IBM01', 2416283 UNION ALL
  SELECT 'NTUplace3','IBM01', 2170000 UNION ALL
  SELECT 'NTUplaceic04','IBM01', 2228943 UNION ALL
  SELECT 'CT','IBM01', 3373670 UNION ALL
  SELECT 'SA','IBM01', 2546110 UNION ALL
  SELECT 'RePlAce','IBM01', 2241590 UNION ALL

  /* IBM02 */
  SELECT 'Uplace','IBM02', 5380000 UNION ALL
  SELECT 'FS5.1','IBM02', 5014615 UNION ALL
  SELECT 'NTUplace3','IBM02', 4630000 UNION ALL
  SELECT 'NTUplaceic04','IBM02', 4674362 UNION ALL
  SELECT 'CT','IBM02', 6281060 UNION ALL
  SELECT 'SA','IBM02', 5118090 UNION ALL
  SELECT 'RePlAce','IBM02', 5265410 UNION ALL

  /* IBM03 */
  SELECT 'Uplace','IBM03', 7320000 UNION ALL
  SELECT 'FS5.1','IBM03', 8259627 UNION ALL
  SELECT 'NTUplace3','IBM03', 6650000 UNION ALL
  SELECT 'NTUplaceic04','IBM03', 6690160 UNION ALL
  SELECT 'CT','IBM03', 9353340 UNION ALL
  SELECT 'SA','IBM03', 7456430 UNION ALL
  SELECT 'RePlAce','IBM03', 6344390 UNION ALL

  /* IBM04 */
  SELECT 'Uplace','IBM04', 8230000 UNION ALL
  SELECT 'FS5.1','IBM04', 8731340 UNION ALL
  SELECT 'NTUplace3','IBM04', 7210000 UNION ALL
  SELECT 'NTUplaceic04','IBM04', 7473716 UNION ALL
  SELECT 'CT','IBM04', 9781980 UNION ALL
  SELECT 'SA','IBM04', 8445470 UNION ALL
  SELECT 'RePlAce','IBM04', 7112910 UNION ALL

  /* IBM05 (no data) */
  SELECT 'Uplace','IBM05', NULL UNION ALL
  SELECT 'FS5.1','IBM05', NULL UNION ALL
  SELECT 'NTUplace3','IBM05', NULL UNION ALL
  SELECT 'NTUplaceic04','IBM05', NULL UNION ALL
  SELECT 'CT','IBM05', NULL UNION ALL
  SELECT 'SA','IBM05', NULL UNION ALL
  SELECT 'RePlAce','IBM05', NULL UNION ALL

  /* IBM06 */
  SELECT 'Uplace','IBM06', 6710000 UNION ALL
  SELECT 'FS5.1','IBM06', 6906980 UNION ALL
  SELECT 'NTUplace3','IBM06', 5940000 UNION ALL
  SELECT 'NTUplaceic04','IBM06', 5896898 UNION ALL
  SELECT 'CT','IBM06', 7097540 UNION ALL
  SELECT 'SA','IBM06', 6334540 UNION ALL
  SELECT 'RePlAce','IBM06', 5725280 UNION ALL

  /* IBM07 */
  SELECT 'Uplace','IBM07', 11800000 UNION ALL
  SELECT 'FS5.1','IBM07', 10973025 UNION ALL
  SELECT 'NTUplace3','IBM07', 9900000 UNION ALL
  SELECT 'NTUplaceic04','IBM07', 9958532 UNION ALL
  SELECT 'CT','IBM07', 13060600 UNION ALL
  SELECT 'SA','IBM07', 11956000 UNION ALL
  SELECT 'RePlAce','IBM07', 9813440 UNION ALL

  /* IBM08 */
  SELECT 'Uplace','IBM08', 13400000 UNION ALL
  SELECT 'FS5.1','IBM08', 13691692 UNION ALL
  SELECT 'NTUplace3','IBM08', 12290000 UNION ALL
  SELECT 'NTUplaceic04','IBM08', 12840047 UNION ALL
  SELECT 'CT','IBM08', 15684500 UNION ALL
  SELECT 'SA','IBM08', 14093200 UNION ALL
  SELECT 'RePlAce','IBM08', 11185400 UNION ALL

  /* IBM09 */
  SELECT 'Uplace','IBM09', 14800000 UNION ALL
  SELECT 'FS5.1','IBM09', 13628803 UNION ALL
  SELECT 'NTUplace3','IBM09', 12000000 UNION ALL
  SELECT 'NTUplaceic04','IBM09', 11992811 UNION ALL
  SELECT 'CT','IBM09', 15691200 UNION ALL
  SELECT 'SA','IBM09', 13222300 UNION ALL
  SELECT 'RePlAce','IBM09', 11940500 UNION ALL

  /* IBM10 */
  SELECT 'Uplace','IBM10', 35200000 UNION ALL
  SELECT 'FS5.1','IBM10', 33680272 UNION ALL
  SELECT 'NTUplace3','IBM10', 28490000 UNION ALL
  SELECT 'NTUplaceic04','IBM10', 29128541 UNION ALL
  SELECT 'CT','IBM10', 54718400 UNION ALL
  SELECT 'SA','IBM10', 37128500 UNION ALL
  SELECT 'RePlAce','IBM10', 39453000 UNION ALL

  /* IBM11 */
  SELECT 'Uplace','IBM11', NULL UNION ALL
  SELECT 'FS5.1','IBM11', 19733992 UNION ALL
  SELECT 'NTUplace3','IBM11', 17540000 UNION ALL
  SELECT 'NTUplaceic04','IBM11', 18076527 UNION ALL
  SELECT 'CT','IBM11', 21647400 UNION ALL
  SELECT 'SA','IBM11', 20723300 UNION ALL
  SELECT 'RePlAce','IBM11', 16589100 UNION ALL

  /* IBM12 */
  SELECT 'Uplace','IBM12', NULL UNION ALL
  SELECT 'FS5.1','IBM12', 35140132 UNION ALL
  SELECT 'NTUplace3','IBM12', 32070000 UNION ALL
  SELECT 'NTUplaceic04','IBM12', 33539759 UNION ALL
  SELECT 'CT','IBM12', 48175200 UNION ALL
  SELECT 'SA','IBM12', 40259300 UNION ALL
  SELECT 'RePlAce','IBM12', 30497500 UNION ALL

  /* IBM13 */
  SELECT 'Uplace','IBM13', NULL UNION ALL
  SELECT 'FS5.1','IBM13', 23797308 UNION ALL
  SELECT 'NTUplace3','IBM13', 22160000 UNION ALL
  SELECT 'NTUplaceic04','IBM13', 22607383 UNION ALL
  SELECT 'CT','IBM13', 29679600 UNION ALL
  SELECT 'SA','IBM13', 27099500 UNION ALL
  SELECT 'RePlAce','IBM13', 21832200 UNION ALL

  /* IBM14 */
  SELECT 'Uplace','IBM14', NULL UNION ALL
  SELECT 'FS5.1','IBM14', 38262332 UNION ALL
  SELECT 'NTUplace3','IBM14', 35360000 UNION ALL
  SELECT 'NTUplaceic04','IBM14', 35795193 UNION ALL
  SELECT 'CT','IBM14', 51257200 UNION ALL
  SELECT 'SA','IBM14', 43863600 UNION ALL
  SELECT 'RePlAce','IBM14', 33917600 UNION ALL

  /* IBM15 */
  SELECT 'Uplace','IBM15', NULL UNION ALL
  SELECT 'FS5.1','IBM15', 50369680 UNION ALL
  SELECT 'NTUplace3','IBM15', 45380000 UNION ALL
  SELECT 'NTUplaceic04','IBM15', 47468823 UNION ALL
  SELECT 'CT','IBM15', 54563400 UNION ALL
  SELECT 'SA','IBM15', 50491900 UNION ALL
  SELECT 'RePlAce','IBM15', 44368200 UNION ALL

  /* IBM16 */
  SELECT 'Uplace','IBM16', NULL UNION ALL
  SELECT 'FS5.1','IBM16', 58354156 UNION ALL
  SELECT 'NTUplace3','IBM16', 57590000 UNION ALL
  SELECT 'NTUplaceic04','IBM16', 58474495 UNION ALL
  SELECT 'CT','IBM16', 68664000 UNION ALL
  SELECT 'SA','IBM16', 65699600 UNION ALL
  SELECT 'RePlAce','IBM16', 51509800 UNION ALL

  /* IBM17 */
  SELECT 'Uplace','IBM17', NULL UNION ALL
  SELECT 'FS5.1','IBM17', 70170848 UNION ALL
  SELECT 'NTUplace3','IBM17', 66730000 UNION ALL
  SELECT 'NTUplaceic04','IBM17', 69403463 UNION ALL
  SELECT 'CT','IBM17', 81895000 UNION ALL
  SELECT 'SA','IBM17', 76482600 UNION ALL
  SELECT 'RePlAce','IBM17', 62749100 UNION ALL

  /* IBM18 */
  SELECT 'Uplace','IBM18', NULL UNION ALL
  SELECT 'FS5.1','IBM18', 44993044 UNION ALL
  SELECT 'NTUplace3','IBM18', 41580000 UNION ALL
  SELECT 'NTUplaceic04','IBM18', 43480120 UNION ALL
  SELECT 'CT','IBM18', 43119400 UNION ALL
  SELECT 'SA','IBM18', 43784200 UNION ALL
  SELECT 'RePlAce','IBM18', 39705400
) AS src(tool_name, bench_name, wl)
JOIN tool t           ON t.name = src.tool_name
JOIN benchmarksuite s ON s.name = 'ICCAD04' AND COALESCE(s.variation,'')=''
JOIN benchmark b      ON b.name = src.bench_name AND b.suite_id = s.suite_id
WHERE src.wl IS NOT NULL
  AND NOT EXISTS (
      SELECT 1
      FROM result r0
      WHERE r0.tool_id = t.tool_id
        AND r0.suite_id = s.suite_id
        AND r0.benchmark_id = b.benchmark_id
  );

-- Verify a few rows
SELECT t.name AS tool, b.name AS bench, r.fom1
FROM result r
JOIN tool t ON r.tool_id=t.tool_id
JOIN benchmark b ON r.benchmark_id=b.benchmark_id
JOIN benchmarksuite s ON r.suite_id=s.suite_id
WHERE s.name='ICCAD04' AND b.name IN ('IBM04','IBM10')
ORDER BY b.name, t.name;
